--// Orange Snipe GUI with ServerHop
-- Services
local Players = game:GetService("Players")
local Http = game:GetService("HttpService")
local TPS = game:GetService("TeleportService")

local LocalPlayer = Players.LocalPlayer
local placeId = game.PlaceId

-- Vars
local stopSearch = false
local maxServers = 100

-- UI
local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 300, 0, 200)
Frame.Position = UDim2.new(0.35, 0, 0.35, 0)
Frame.BackgroundColor3 = Color3.fromRGB(255, 140, 0) -- orange
Frame.Active = true
Frame.Draggable = true
Frame.Name = "SnipeGUI"

local UICorner = Instance.new("UICorner", Frame)
UICorner.CornerRadius = UDim.new(0, 12)

-- Title
local Title = Instance.new("TextLabel", Frame)
Title.Size = UDim2.new(1, 0, 0, 30)
Title.BackgroundTransparency = 1
Title.Text = "üî´ Stream Snipe GUI"
Title.TextColor3 = Color3.new(1,1,1)
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 20

-- PlaceId Box
local PlaceBox = Instance.new("TextBox", Frame)
PlaceBox.PlaceholderText = "Enter PlaceId (default = current)"
PlaceBox.Size = UDim2.new(1, -20, 0, 25)
PlaceBox.Position = UDim2.new(0, 10, 0, 40)
PlaceBox.BackgroundColor3 = Color3.fromRGB(255, 200, 120)
PlaceBox.Text = tostring(placeId)

-- Username Box
local UserBox = Instance.new("TextBox", Frame)
UserBox.PlaceholderText = "Target Username"
UserBox.Size = UDim2.new(1, -20, 0, 25)
UserBox.Position = UDim2.new(0, 10, 0, 70)
UserBox.BackgroundColor3 = Color3.fromRGB(255, 200, 120)
UserBox.Text = ""

-- Status Label
local Status = Instance.new("TextLabel", Frame)
Status.Size = UDim2.new(1, -20, 0, 25)
Status.Position = UDim2.new(0, 10, 0, 100)
Status.BackgroundTransparency = 1
Status.Text = "Status: Idle"
Status.TextColor3 = Color3.new(1,1,1)
Status.TextSize = 18
Status.Font = Enum.Font.SourceSansBold
Status.TextWrapped = true

-- Start Button
local StartBtn = Instance.new("TextButton", Frame)
StartBtn.Size = UDim2.new(0.45, -15, 0, 30)
StartBtn.Position = UDim2.new(0, 10, 0, 140)
StartBtn.Text = "Start Snipe"
StartBtn.BackgroundColor3 = Color3.fromRGB(255, 180, 60)
StartBtn.TextColor3 = Color3.new(1,1,1)
StartBtn.Font = Enum.Font.SourceSansBold
StartBtn.TextSize = 18

local StopBtn = Instance.new("TextButton", Frame)
StopBtn.Size = UDim2.new(0.45, -15, 0, 30)
StopBtn.Position = UDim2.new(0.55, 5, 0, 140)
StopBtn.Text = "Stop"
StopBtn.BackgroundColor3 = Color3.fromRGB(200, 80, 60)
StopBtn.TextColor3 = Color3.new(1,1,1)
StopBtn.Font = Enum.Font.SourceSansBold
StopBtn.TextSize = 18

-- Server API
local function ListServers(place, cursor)
    local url = ("https://games.roblox.com/v1/games/%s/servers/Public?sortOrder=Asc&limit=100"):format(place)
    if cursor then
        url = url .. "&cursor=" .. cursor
    end
    local response = Http:JSONDecode(game:HttpGet(url))
    return response
end

-- Search + Serverhop
local function StartSearch()
    stopSearch = false
    Status.Text = "Status: Searching..."
    local targetUser = UserBox.Text
    local chosenPlace = tonumber(PlaceBox.Text) or placeId
    local cursor
    local checked = 0

    while not stopSearch and checked < maxServers do
        local servers = ListServers(chosenPlace, cursor)
        for _, server in ipairs(servers.data) do
            if stopSearch then break end
            checked += 1
            Status.Text = ("Checking server %d/%d..."):format(checked, maxServers)

            -- Check players
            if server.playing > 0 then
                for _, player in ipairs(server.playerIds or {}) do
                    local success, name = pcall(function()
                        return Players:GetNameFromUserIdAsync(player)
                    end)
                    if success and string.lower(name) == string.lower(targetUser) then
                        Status.Text = "‚úÖ Found! Teleporting..."
                        TPS:TeleportToPlaceInstance(chosenPlace, server.id, LocalPlayer)
                        return
                    end
                end
            end

            -- If not found, hop
            Status.Text = "ServerHop..."
            TPS:TeleportToPlaceInstance(chosenPlace, server.id, LocalPlayer)
            task.wait(2) -- prevent spam
        end
        cursor = servers.nextPageCursor
        if not cursor then break end
    end

    if not stopSearch then
        Status.Text = "‚ùå Not found. Try again."
    end
end

StartBtn.MouseButton1Click:Connect(function()
    if UserBox.Text == "" then
        Status.Text = "‚ö†Ô∏è Enter a username first"
        return
    end
    task.spawn(StartSearch)
end)

StopBtn.MouseButton1Click:Connect(function()
    stopSearch = true
    Status.Text = "‚èπÔ∏è Stopped"
end)
